import{A as Rr,a as wr,d as Tr,g as Dr,j as Qt,k as Ht,l as Yt,m as Cr,n as _r,o as Ir,p as M,q as ke,r as Mr,s as qr,t as Be,u as v,w as st,x as Ne,z as Lr}from"./chunk-O5D25TI4.js";import{o as Pr,x as Or}from"./chunk-PKAXVJFX.js";import{Na as yr,Qc as Ee,Ra as Tn,Tc as ie,Wb as br,Wc as hr,Xb as vr,Za as gr,_a as kr,_c as at,eb as Re,gc as H,gd as zt,ha as xt,hb as Ar,hc as Oe,kd as Gt,lb as Dt,n as ue,na as Kt,nb as it,o as ot,oa as Vt,qa as ce,wc as Wt}from"./chunk-R5HJQXZQ.js";import{d as jt}from"./chunk-PPMPQKRK.js";import{h as fr}from"./chunk-GBKSQA4Y.js";import{Bd as Sr,C as rr,H as Ft,I as or,J as et,K as x,L as g,R as ir,S as ye,V as ge,de as He,gb as w,gd as Ut,ib as nt,nb as mr,ob as rt,r as me,ze as W}from"./chunk-S6KJ2BHO.js";import{a as T,m as Le}from"./chunk-MNQ7RLHG.js";import{Ra as pr,_ as ar,h as nr,ha as j,ja as se,m as li,ma as q,ra as Tt,xa as Q}from"./chunk-NMZ7IVPZ.js";import{U as sr,V as ur,Z as Qe,_ as cr,a as Nt,b as G,c as N,ca as lr,da as qe,ea as dr,x as tt}from"./chunk-H6ILHDLW.js";import{a as L}from"./chunk-7X4NV6OJ.js";import{c as O,f as I,h as i,m as Buffer,n as a}from"./chunk-3KENBVE7.js";var po=O(dn=>{"use strict";i();a();Object.defineProperty(dn,"__esModule",{value:!0});dn.deserialize=oa;dn.serialize=ia;var lo=pn();function oa(e,t=0){return lo.depositReceiptBeet.deserialize(e,t+8)}function ia(e){return lo.depositReceiptBeet.serialize(e)}});var pn=O(F=>{"use strict";i();a();var aa=F&&F.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),sa=F&&F.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),fn=F&&F.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&aa(n,t,r[o]);return sa(n,t),n}}();Object.defineProperty(F,"__esModule",{value:!0});F.depositReceiptBeet=F.DepositReceipt=void 0;var ua=fn(me()),xe=fn(ue()),Lt=fn(ot()),ca=fn(po()),mn=class e{constructor(t,n,r,o,s,d,u,c,l,p){this.base=t,this.owner=n,this.stakePool=r,this.stakePoolDepositStakeAuthority=o,this.depositTime=s,this.lstAmount=d,this.coolDownSeconds=u,this.initialFeeBps=c,this.bumpSeed=l,this.reserved=p}static fromArgs(t){return new e(t.base,t.owner,t.stakePool,t.stakePoolDepositStakeAuthority,t.depositTime,t.lstAmount,t.coolDownSeconds,t.initialFeeBps,t.bumpSeed,t.reserved)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static async fromAccountAddress(t,n,r){let o=await t.getAccountInfo(n,r);if(o==null)throw new Error(`Unable to find DepositReceipt account at ${n}`);return e.fromAccountInfo(o,0)[0]}static gpaBuilder(t=new ua.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return Lt.GpaBuilder.fromStruct(t,F.depositReceiptBeet)}static deserialize(t,n=0){return da(t,n)}serialize(){return la(this)}static get byteSize(){return F.depositReceiptBeet.byteSize}static async getMinimumBalanceForRentExemption(t,n){return t.getMinimumBalanceForRentExemption(e.byteSize,n)}static hasCorrectByteSize(t,n=0){return t.byteLength-n===e.byteSize}pretty(){return{base:this.base.toBase58(),owner:this.owner.toBase58(),stakePool:this.stakePool.toBase58(),stakePoolDepositStakeAuthority:this.stakePoolDepositStakeAuthority.toBase58(),depositTime:this.depositTime,lstAmount:this.lstAmount,coolDownSeconds:this.coolDownSeconds,initialFeeBps:this.initialFeeBps,bumpSeed:this.bumpSeed,reserved:this.reserved}}};F.DepositReceipt=mn;F.depositReceiptBeet=new xe.BeetStruct([["base",Lt.publicKey],["owner",Lt.publicKey],["stakePool",Lt.publicKey],["stakePoolDepositStakeAuthority",Lt.publicKey],["depositTime",xe.u64],["lstAmount",xe.u64],["coolDownSeconds",xe.u64],["initialFeeBps",xe.u32],["bumpSeed",xe.u8],["reserved",xe.uniformFixedSizeArray(xe.u8,256)]],mn.fromArgs,"DepositReceipt");var St=ca,la=typeof St.serialize=="function"?St.serialize.bind(St):F.depositReceiptBeet.serialize.bind(F.depositReceiptBeet),da=typeof St.deserialize=="function"?St.deserialize.bind(St):F.depositReceiptBeet.deserialize.bind(F.depositReceiptBeet)});var fo=O(Sn=>{"use strict";i();a();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.deserialize=pa;Sn.serialize=ma;var mo=yn();function pa(e,t=0){return mo.stakePoolDepositStakeAuthorityBeet.deserialize(e,t+8)}function ma(e){return mo.stakePoolDepositStakeAuthorityBeet.serialize(e)}});var yn=O(U=>{"use strict";i();a();var fa=U&&U.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Sa=U&&U.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kn=U&&U.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&fa(n,t,r[o]);return Sa(n,t),n}}();Object.defineProperty(U,"__esModule",{value:!0});U.stakePoolDepositStakeAuthorityBeet=U.StakePoolDepositStakeAuthority=void 0;var ya=kn(me()),yt=kn(ue()),Ke=kn(ot()),ga=kn(fo()),gn=class e{constructor(t,n,r,o,s,d,u,c,l,p,f){this.base=t,this.stakePool=n,this.poolMint=r,this.authority=o,this.vault=s,this.stakePoolProgramId=d,this.coolDownSeconds=u,this.initalFeeBps=c,this.feeWallet=l,this.bumpSeed=p,this.reserved=f}static fromArgs(t){return new e(t.base,t.stakePool,t.poolMint,t.authority,t.vault,t.stakePoolProgramId,t.coolDownSeconds,t.initalFeeBps,t.feeWallet,t.bumpSeed,t.reserved)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static async fromAccountAddress(t,n,r){let o=await t.getAccountInfo(n,r);if(o==null)throw new Error(`Unable to find StakePoolDepositStakeAuthority account at ${n}`);return e.fromAccountInfo(o,0)[0]}static gpaBuilder(t=new ya.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return Ke.GpaBuilder.fromStruct(t,U.stakePoolDepositStakeAuthorityBeet)}static deserialize(t,n=0){return Aa(t,n)}serialize(){return ka(this)}static get byteSize(){return U.stakePoolDepositStakeAuthorityBeet.byteSize}static async getMinimumBalanceForRentExemption(t,n){return t.getMinimumBalanceForRentExemption(e.byteSize,n)}static hasCorrectByteSize(t,n=0){return t.byteLength-n===e.byteSize}pretty(){return{base:this.base.toBase58(),stakePool:this.stakePool.toBase58(),poolMint:this.poolMint.toBase58(),authority:this.authority.toBase58(),vault:this.vault.toBase58(),stakePoolProgramId:this.stakePoolProgramId.toBase58(),coolDownSeconds:this.coolDownSeconds,initalFeeBps:this.initalFeeBps,feeWallet:this.feeWallet.toBase58(),bumpSeed:this.bumpSeed,reserved:this.reserved}}};U.StakePoolDepositStakeAuthority=gn;U.stakePoolDepositStakeAuthorityBeet=new yt.BeetStruct([["base",Ke.publicKey],["stakePool",Ke.publicKey],["poolMint",Ke.publicKey],["authority",Ke.publicKey],["vault",Ke.publicKey],["stakePoolProgramId",Ke.publicKey],["coolDownSeconds",yt.u64],["initalFeeBps",yt.u32],["feeWallet",Ke.publicKey],["bumpSeed",yt.u8],["reserved",yt.uniformFixedSizeArray(yt.u8,256)]],gn.fromArgs,"StakePoolDepositStakeAuthority");var gt=ga,ka=typeof gt.serialize=="function"?gt.serialize.bind(gt):U.stakePoolDepositStakeAuthorityBeet.serialize.bind(U.stakePoolDepositStakeAuthorityBeet),Aa=typeof gt.deserialize=="function"?gt.deserialize.bind(gt):U.stakePoolDepositStakeAuthorityBeet.deserialize.bind(U.stakePoolDepositStakeAuthorityBeet)});var yo=O(be=>{"use strict";i();a();var ba=be&&be.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),So=be&&be.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ba(t,e,n)};Object.defineProperty(be,"__esModule",{value:!0});be.accountProviders=void 0;So(pn(),be);So(yn(),be);var va=yn(),ha=pn();be.accountProviders={StakePoolDepositStakeAuthority:va.StakePoolDepositStakeAuthority,DepositReceipt:ha.DepositReceipt}});var bo=O(Y=>{"use strict";i();a();var Pa=Y&&Y.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),wa=Y&&Y.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ao=Y&&Y.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Pa(n,t,r[o]);return wa(n,t),n}}();Object.defineProperty(Y,"__esModule",{value:!0});Y.changeDepositReceiptOwnerInstructionDiscriminator=Y.ChangeDepositReceiptOwnerStruct=void 0;Y.createChangeDepositReceiptOwnerInstruction=Ta;var go=Ao(ue()),ko=Ao(me());Y.ChangeDepositReceiptOwnerStruct=new go.BeetArgsStruct([["instructionDiscriminator",go.u8]],"ChangeDepositReceiptOwnerInstructionArgs");Y.changeDepositReceiptOwnerInstructionDiscriminator=4;function Ta(e,t=new ko.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=Y.ChangeDepositReceiptOwnerStruct.serialize({instructionDiscriminator:Y.changeDepositReceiptOwnerInstructionDiscriminator}),r=[{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.currentOwner,isWritable:!1,isSigner:!0},{pubkey:e.newOwner,isWritable:!1,isSigner:!1}];return new ko.TransactionInstruction({programId:t,keys:r,data:n})}});var ho=O($=>{"use strict";i();a();var Da=$&&$.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ca=$&&$.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qn=$&&$.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Da(n,t,r[o]);return Ca(n,t),n}}();Object.defineProperty($,"__esModule",{value:!0});$.claimPoolTokensInstructionDiscriminator=$.ClaimPoolTokensStruct=void 0;$.createClaimPoolTokensInstruction=Ia;var _a=qn(Dt()),vo=qn(ue()),Mn=qn(me());$.ClaimPoolTokensStruct=new vo.BeetArgsStruct([["instructionDiscriminator",vo.u8]],"ClaimPoolTokensInstructionArgs");$.claimPoolTokensInstructionDiscriminator=5;function Ia(e,t=new Mn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=$.ClaimPoolTokensStruct.serialize({instructionDiscriminator:$.claimPoolTokensInstructionDiscriminator}),r=[{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.owner,isWritable:!0,isSigner:!0},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.destination,isWritable:!0,isSigner:!1},{pubkey:e.feeWallet,isWritable:!0,isSigner:!1},{pubkey:e.depositAuthority,isWritable:!1,isSigner:!1},{pubkey:e.poolMint,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??_a.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Mn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Mn.TransactionInstruction({programId:t,keys:r,data:n})}});var Ln=O(ve=>{"use strict";i();a();var Ma=ve&&ve.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),qa=ve&&ve.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Po=ve&&ve.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Ma(n,t,r[o]);return qa(n,t),n}}();Object.defineProperty(ve,"__esModule",{value:!0});ve.depositStakeArgsBeet=void 0;var La=Po(ot()),Ra=Po(ue());ve.depositStakeArgsBeet=new Ra.BeetArgsStruct([["owner",La.publicKey]],"DepositStakeArgs")});var To=O(J=>{"use strict";i();a();var Oa=J&&J.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ea=J&&J.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),On=J&&J.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Oa(n,t,r[o]);return Ea(n,t),n}}();Object.defineProperty(J,"__esModule",{value:!0});J.depositStakeInstructionDiscriminator=J.DepositStakeStruct=void 0;J.createDepositStakeInstruction=Fa;var Ba=On(Dt()),wo=On(ue()),Rn=On(me()),Na=Ln();J.DepositStakeStruct=new wo.BeetArgsStruct([["instructionDiscriminator",wo.u8],["depositStakeArgs",Na.depositStakeArgsBeet]],"DepositStakeInstructionArgs");J.depositStakeInstructionDiscriminator=2;function Fa(e,t,n=new Rn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=J.DepositStakeStruct.serialize({instructionDiscriminator:J.depositStakeInstructionDiscriminator,...t}),o=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.stakePool,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:e.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:e.stake,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:e.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:e.poolMint,isWritable:!0,isSigner:!1},{pubkey:e.clock,isWritable:!1,isSigner:!1},{pubkey:e.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Ba.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Rn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Rn.TransactionInstruction({programId:n,keys:o,data:r})}});var En=O(he=>{"use strict";i();a();var Ua=he&&he.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),xa=he&&he.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Co=he&&he.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Ua(n,t,r[o]);return xa(n,t),n}}();Object.defineProperty(he,"__esModule",{value:!0});he.depositStakeWithSlippageArgsBeet=void 0;var Do=Co(ue()),Ka=Co(ot());he.depositStakeWithSlippageArgsBeet=new Do.BeetArgsStruct([["owner",Ka.publicKey],["minimumPoolTokensOut",Do.u64]],"DepositStakeWithSlippageArgs")});var Io=O(X=>{"use strict";i();a();var Va=X&&X.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ja=X&&X.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Nn=X&&X.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Va(n,t,r[o]);return ja(n,t),n}}();Object.defineProperty(X,"__esModule",{value:!0});X.depositStakeWithSlippageInstructionDiscriminator=X.DepositStakeWithSlippageStruct=void 0;X.createDepositStakeWithSlippageInstruction=Ga;var Wa=Nn(Dt()),_o=Nn(ue()),Bn=Nn(me()),za=En();X.DepositStakeWithSlippageStruct=new _o.BeetArgsStruct([["instructionDiscriminator",_o.u8],["depositStakeWithSlippageArgs",za.depositStakeWithSlippageArgsBeet]],"DepositStakeWithSlippageInstructionArgs");X.depositStakeWithSlippageInstructionDiscriminator=3;function Ga(e,t,n=new Bn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=X.DepositStakeWithSlippageStruct.serialize({instructionDiscriminator:X.depositStakeWithSlippageInstructionDiscriminator,...t}),o=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.stakePool,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:e.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:e.stake,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:e.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:e.poolMint,isWritable:!0,isSigner:!1},{pubkey:e.clock,isWritable:!1,isSigner:!1},{pubkey:e.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Wa.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Bn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Bn.TransactionInstruction({programId:n,keys:o,data:r})}});var Un=O(Pe=>{"use strict";i();a();var Qa=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ha=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Mo=Pe&&Pe.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Qa(n,t,r[o]);return Ha(n,t),n}}();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.initStakePoolDepositStakeAuthorityArgsBeet=void 0;var Fn=Mo(ue()),Ya=Mo(ot());Pe.initStakePoolDepositStakeAuthorityArgsBeet=new Fn.BeetArgsStruct([["feeWallet",Ya.publicKey],["coolDownSeconds",Fn.u64],["initialFeeBps",Fn.u32]],"InitStakePoolDepositStakeAuthorityArgs")});var Lo=O(Z=>{"use strict";i();a();var $a=Z&&Z.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ja=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Kn=Z&&Z.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&$a(n,t,r[o]);return Ja(n,t),n}}();Object.defineProperty(Z,"__esModule",{value:!0});Z.initStakePoolDepositStakeAuthorityInstructionDiscriminator=Z.InitStakePoolDepositStakeAuthorityStruct=void 0;Z.createInitStakePoolDepositStakeAuthorityInstruction=es;var Xa=Kn(Dt()),qo=Kn(ue()),xn=Kn(me()),Za=Un();Z.InitStakePoolDepositStakeAuthorityStruct=new qo.BeetArgsStruct([["instructionDiscriminator",qo.u8],["initStakePoolDepositStakeAuthorityArgs",Za.initStakePoolDepositStakeAuthorityArgsBeet]],"InitStakePoolDepositStakeAuthorityInstructionArgs");Z.initStakePoolDepositStakeAuthorityInstructionDiscriminator=0;function es(e,t,n=new xn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=Z.InitStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:Z.initStakePoolDepositStakeAuthorityInstructionDiscriminator,...t}),o=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:e.vaultAta,isWritable:!0,isSigner:!1},{pubkey:e.authority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePool,isWritable:!1,isSigner:!1},{pubkey:e.stakePoolMint,isWritable:!1,isSigner:!1},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Xa.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.associatedTokenProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??xn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new xn.TransactionInstruction({programId:n,keys:o,data:r})}});var Vn=O(we=>{"use strict";i();a();var ts=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ns=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ro=we&&we.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&ts(n,t,r[o]);return ns(n,t),n}}();Object.defineProperty(we,"__esModule",{value:!0});we.updateStakePoolDepositStakeAuthorityArgsBeet=void 0;var kt=Ro(ue()),rs=Ro(ot());we.updateStakePoolDepositStakeAuthorityArgsBeet=new kt.FixableBeetArgsStruct([["feeWallet",kt.coption(rs.publicKey)],["coolDownSeconds",kt.coption(kt.u64)],["initialFeeBps",kt.coption(kt.u32)]],"UpdateStakePoolDepositStakeAuthorityArgs")});var No=O(ee=>{"use strict";i();a();var os=ee&&ee.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),is=ee&&ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Bo=ee&&ee.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&os(n,t,r[o]);return is(n,t),n}}();Object.defineProperty(ee,"__esModule",{value:!0});ee.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=ee.UpdateStakePoolDepositStakeAuthorityStruct=void 0;ee.createUpdateStakePoolDepositStakeAuthorityInstruction=ss;var Oo=Bo(ue()),Eo=Bo(me()),as=Vn();ee.UpdateStakePoolDepositStakeAuthorityStruct=new Oo.FixableBeetArgsStruct([["instructionDiscriminator",Oo.u8],["updateStakePoolDepositStakeAuthorityArgs",as.updateStakePoolDepositStakeAuthorityArgsBeet]],"UpdateStakePoolDepositStakeAuthorityInstructionArgs");ee.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=1;function ss(e,t,n=new Eo.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=ee.UpdateStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:ee.updateStakePoolDepositStakeAuthorityInstructionDiscriminator,...t}),o=[{pubkey:e.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:e.authority,isWritable:!1,isSigner:!0},{pubkey:e.newAuthority??n,isWritable:!1,isSigner:!1}];return new Eo.TransactionInstruction({programId:n,keys:o,data:r})}});var Fo=O(de=>{"use strict";i();a();var us=de&&de.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),At=de&&de.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&us(t,e,n)};Object.defineProperty(de,"__esModule",{value:!0});At(bo(),de);At(ho(),de);At(To(),de);At(Io(),de);At(Lo(),de);At(No(),de)});var Uo=O(Te=>{"use strict";i();a();var cs=Te&&Te.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),An=Te&&Te.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&cs(t,e,n)};Object.defineProperty(Te,"__esModule",{value:!0});An(Ln(),Te);An(En(),Te);An(Un(),Te);An(Vn(),Te)});var Wn=O(re=>{"use strict";i();a();var ls=re&&re.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),jn=re&&re.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ls(t,e,n)};Object.defineProperty(re,"__esModule",{value:!0});re.PROGRAM_ID=re.PROGRAM_ADDRESS=void 0;var ds=me();jn(yo(),re);jn(Fo(),re);jn(Uo(),re);re.PROGRAM_ADDRESS="5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV";re.PROGRAM_ID=new ds.PublicKey(re.PROGRAM_ADDRESS)});var Qn=O(b=>{"use strict";i();a();var ps=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});b.map=b.array=b.rustEnum=b.str=b.vecU8=b.tagged=b.vec=b.bool=b.option=b.publicKey=b.i256=b.u256=b.i128=b.u128=b.i64=b.u64=b.struct=b.f64=b.f32=b.i32=b.u32=b.i16=b.u16=b.i8=b.u8=void 0;var R=yr(),ms=me(),fs=ps(nr()),_e=yr();Object.defineProperty(b,"u8",{enumerable:!0,get:function(){return _e.u8}});Object.defineProperty(b,"i8",{enumerable:!0,get:function(){return _e.s8}});Object.defineProperty(b,"u16",{enumerable:!0,get:function(){return _e.u16}});Object.defineProperty(b,"i16",{enumerable:!0,get:function(){return _e.s16}});Object.defineProperty(b,"u32",{enumerable:!0,get:function(){return _e.u32}});Object.defineProperty(b,"i32",{enumerable:!0,get:function(){return _e.s32}});Object.defineProperty(b,"f32",{enumerable:!0,get:function(){return _e.f32}});Object.defineProperty(b,"f64",{enumerable:!0,get:function(){return _e.f64}});Object.defineProperty(b,"struct",{enumerable:!0,get:function(){return _e.struct}});var Ve=class extends R.Layout{constructor(t,n,r){super(t,r),this.blob=(0,R.blob)(t),this.signed=n}decode(t,n=0){let r=new fs.default(this.blob.decode(t,n),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(t,n,r=0){return this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),n,r)}};function xo(e){return new Ve(8,!1,e)}b.u64=xo;function Ss(e){return new Ve(8,!0,e)}b.i64=Ss;function ys(e){return new Ve(16,!1,e)}b.u128=ys;function gs(e){return new Ve(16,!0,e)}b.i128=gs;function ks(e){return new Ve(32,!1,e)}b.u256=ks;function As(e){return new Ve(32,!0,e)}b.i256=As;var De=class extends R.Layout{constructor(t,n,r,o){super(t.span,o),this.layout=t,this.decoder=n,this.encoder=r}decode(t,n){return this.decoder(this.layout.decode(t,n))}encode(t,n,r){return this.layout.encode(this.encoder(t),n,r)}getSpan(t,n){return this.layout.getSpan(t,n)}};function bs(e){return new De((0,R.blob)(32),t=>new ms.PublicKey(t),t=>t.toBuffer(),e)}b.publicKey=bs;var zn=class extends R.Layout{constructor(t,n){super(-1,n),this.layout=t,this.discriminator=(0,R.u8)()}encode(t,n,r=0){return t==null?this.discriminator.encode(0,n,r):(this.discriminator.encode(1,n,r),this.layout.encode(t,n,r+1)+1)}decode(t,n=0){let r=this.discriminator.decode(t,n);if(r===0)return null;if(r===1)return this.layout.decode(t,n+1);throw new Error("Invalid option "+this.property)}getSpan(t,n=0){let r=this.discriminator.decode(t,n);if(r===0)return 1;if(r===1)return this.layout.getSpan(t,n+1)+1;throw new Error("Invalid option "+this.property)}};function vs(e,t){return new zn(e,t)}b.option=vs;function hs(e){return new De((0,R.u8)(),Ps,ws,e)}b.bool=hs;function Ps(e){if(e===0)return!1;if(e===1)return!0;throw new Error("Invalid bool: "+e)}function ws(e){return e?1:0}function Ts(e,t){let n=(0,R.u32)("length"),r=(0,R.struct)([n,(0,R.seq)(e,(0,R.offset)(n,-n.span),"values")]);return new De(r,({values:o})=>o,o=>({values:o}),t)}b.vec=Ts;function Ds(e,t,n){let r=(0,R.struct)([xo("tag"),t.replicate("data")]);function o({tag:s,data:d}){if(!s.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+s.toString("hex"));return d}return new De(r,o,s=>({tag:e,data:s}),n)}b.tagged=Ds;function Ko(e){let t=(0,R.u32)("length"),n=(0,R.struct)([t,(0,R.blob)((0,R.offset)(t,-t.span),"data")]);return new De(n,({data:r})=>r,r=>({data:r}),e)}b.vecU8=Ko;function Cs(e){return new De(Ko(),t=>t.toString("utf-8"),t=>Buffer.from(t,"utf-8"),e)}b.str=Cs;function _s(e,t,n){let r=(0,R.union)(n??(0,R.u8)(),t);return e.forEach((o,s)=>r.addVariant(s,o,o.property)),r}b.rustEnum=_s;function Is(e,t,n){let r=(0,R.struct)([(0,R.seq)(e,t,"values")]);return new De(r,({values:o})=>o,o=>({values:o}),n)}b.array=Is;var Gn=class extends R.Layout{constructor(t,n,r){super(t.span+n.span,r),this.keyLayout=t,this.valueLayout=n}decode(t,n){n=n||0;let r=this.keyLayout.decode(t,n),o=this.valueLayout.decode(t,n+this.keyLayout.getSpan(t,n));return[r,o]}encode(t,n,r){r=r||0;let o=this.keyLayout.encode(t[0],n,r),s=this.valueLayout.encode(t[1],n,r+o);return o+s}getSpan(t,n){return this.keyLayout.getSpan(t,n)+this.valueLayout.getSpan(t,n)}};function Ms(e,t,n){let r=(0,R.u32)("length"),o=(0,R.struct)([r,(0,R.seq)(new Gn(e,t),(0,R.offset)(r,-r.span),"values")]);return new De(o,({values:s})=>new Map(s),s=>({values:Array.from(s.entries())}),n)}b.map=Ms});var Vo=O(bn=>{"use strict";i();a();Object.defineProperty(bn,"__esModule",{value:!0});bn.depositStake=void 0;var ae=me(),Hn=Wn(),Yn=Dt(),oe=Qn(),$n=new ae.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy"),qs=(0,oe.struct)([(0,oe.u8)("accountType"),(0,oe.publicKey)("manager"),(0,oe.publicKey)("staker"),(0,oe.publicKey)("stakeDepositAuthority"),(0,oe.u8)("stakeWithdrawBumpSeed"),(0,oe.publicKey)("validatorList"),(0,oe.publicKey)("reserveStake"),(0,oe.publicKey)("poolMint"),(0,oe.publicKey)("managerFeeAccount"),(0,oe.publicKey)("tokenProgramId"),(0,oe.u64)("totalLamports"),(0,oe.u64)("poolTokenSupply"),(0,oe.u64)("lastUpdateEpoch")]),Ls=async(e,t)=>{let n=await e.getAccountInfo(t);if(!n)throw new Error("Stake pool account not found");let r=qs.decode(n.data);return{pubkey:t,account:{data:r}}},Rs=async(e,t,n,r,o,s,d,u)=>{let c=await Ls(e,n),l=await Hn.StakePoolDepositStakeAuthority.fromAccountAddress(e,c.account.data.stakeDepositAuthority),p=await Os($n,n),f=await Es($n,o,n),S=[],m=[],A=ae.Keypair.generate(),k=c.account.data.poolMint;if(m.push(A),!d){let K=(0,Yn.getAssociatedTokenAddressSync)(k,r);S.push((0,Yn.createAssociatedTokenAccountIdempotentInstruction)(r,K,r,k)),d=K}S.push(...ae.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:r,newAuthorizedPubkey:c.account.data.stakeDepositAuthority,stakeAuthorizationType:ae.StakeAuthorizationLayout.Staker}).instructions),S.push(...ae.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:r,newAuthorizedPubkey:c.account.data.stakeDepositAuthority,stakeAuthorizationType:ae.StakeAuthorizationLayout.Withdrawer}).instructions);let[P]=ae.PublicKey.findProgramAddressSync([Buffer.from("deposit_receipt"),n.toBuffer(),A.publicKey.toBuffer()],Hn.PROGRAM_ID),D={depositStakeArgs:{owner:r}},_={payer:t,stakePoolProgram:$n,depositReceipt:P,stakePool:n,validatorStakeList:c.account.data.validatorList,depositStakeAuthority:c.account.data.stakeDepositAuthority,base:A.publicKey,stakePoolWithdrawAuthority:p,stake:s,validatorStakeAccount:f,reserveStakeAccount:c.account.data.reserveStake,vault:l.vault,managerFeeAccount:c.account.data.managerFeeAccount,referrerPoolTokensAccount:d,poolMint:k,clock:ae.SYSVAR_CLOCK_PUBKEY,stakeHistory:ae.SYSVAR_STAKE_HISTORY_PUBKEY,tokenProgram:Yn.TOKEN_PROGRAM_ID,stakeProgram:ae.StakeProgram.programId,systemProgram:ae.SystemProgram.programId},C=(0,Hn.createDepositStakeInstruction)(_,D);return u?.length&&C.keys.push(...u),S.push(C),{instructions:S,signers:m}};bn.depositStake=Rs;var Os=(e,t)=>{let[n]=ae.PublicKey.findProgramAddressSync([t.toBuffer(),Buffer.from("withdraw")],e);return n},Es=(e,t,n)=>{let[r]=ae.PublicKey.findProgramAddressSync([t.toBuffer(),n.toBuffer(),Buffer.alloc(0)],e);return r}});var Wo=O(je=>{"use strict";i();a();var Bs=je&&je.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),jo=je&&je.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Bs(t,e,n)};Object.defineProperty(je,"__esModule",{value:!0});jo(Wn(),je);jo(Vo(),je)});i();a();i();a();var Fe=new Error("Missing sender address for staking fungibles."),Er=new Error("Missing signature from waiting for staking transaction confirmation."),Br=new Error("PublicKey is required");var Ye=class extends Error{constructor(t){super(t)}};function di({stakePubkey:e,stakeAuthorityPubkey:t,authorizedPubkey:n,transaction:r=new x.Transaction}){return t.equals(n)||r.add(g.StakeProgram.authorize({authorizedPubkey:n,newAuthorizedPubkey:n,stakeAuthorizationType:g.StakeAuthorizationLayout.Staker,stakePubkey:e})),r.add(g.StakeProgram.deactivate({stakePubkey:e,authorizedPubkey:n})),r}var pi=e=>{let{t}=Le(),n=j(),r=Be(),{mutateAsync:o}=Oe(e);return se({mutationFn:async({accountIdentifier:u,senderAddress:c,stakePubkey:l,stakeAuthorityPubkey:p,authorizedPubkey:f})=>{if(!c)throw Fe;let{networkID:S,address:m}=c,A=di({stakePubkey:l,stakeAuthorityPubkey:p,authorizedPubkey:f}),k=await ce(A,{connection:e}),P={ownerAddress:m??"",networkID:S,data:{signature:""},type:"deactivateState",display:{summary:{topLeft:{text:t("transactionsPendingDeactivatingStake")}}}};r.approved({chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(S),type:"undelegate"});let D=await o({accountIdentifier:u,feePayer:new g.PublicKey(m),transaction:k,pendingTransactionInput:P});return r.submittedTransaction(D,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(S),method:"signAndSendTransaction"}),r.deactivateStake(),{networkID:S,id:D??""}},onSuccess:u=>{Re({connection:e,signature:u.id}).then(()=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ke(n)()}).catch(c=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();function Dn({stakePubkey:e,authorizedPubkey:t,votePubkey:n}){return g.StakeProgram.delegate({stakePubkey:e,authorizedPubkey:t,votePubkey:n})}var mi=e=>{let{t}=Le(),n=j(),r=Be(),{mutateAsync:o}=Oe(e);return se({mutationFn:async({accountIdentifier:u,senderAddress:c,stakePubkey:l,authorizedPubkey:p,votePubkey:f})=>{if(!c)throw Fe;let{networkID:S,address:m}=c,A=Dn({stakePubkey:l,authorizedPubkey:p,votePubkey:f}),k=await ce(A,{connection:e}),P={ownerAddress:m??"",networkID:S,data:{signature:""},type:"delegateStake",display:{summary:{topLeft:{text:t("transactionsPendingDelegatingStake")}}}};r.approved({chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(S),type:"delegate"});let D=await o({accountIdentifier:u,feePayer:new g.PublicKey(m),transaction:k,pendingTransactionInput:P});return r.submittedTransaction(D,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(S),method:"signAndSendTransaction"}),{networkID:S,id:D??""}},onSuccess:u=>{Re({connection:e,signature:u.id}).then(()=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ke(n)()}).catch(c=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();i();a();var Nr=({numSignatures:e,lamportsPerSignature:t,lamportBalance:n,rentExemptionMinimum:r})=>{let o=G(t).multipliedBy(e),s=n.minus(o);return G.max(s.minus(r),0)};var fi=({balance:e,rentExemptionMinimum:t})=>{let n=Nr({numSignatures:11,lamportsPerSignature:it,lamportBalance:G(e),rentExemptionMinimum:or(t)});return parseFloat(Ft(n).toFixed(9))};i();a();i();a();var Si="https://keybase.io/_/api/1.0/user/pic_url.json",Jt=async e=>{let t=await ye.get(`${Si}?username=${encodeURIComponent(e)}`);if(!ge(t)||t.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return t.data.pic_url};var yi=e=>{let t=M.keybaseUserAvatar(e);return q({enabled:!!e,queryKey:t,async queryFn(){if(!e)throw new Error("Keybase username is required");return Jt(e)},placeholderData:"",staleTime:1/0})};i();a();var gi=async(e,t)=>await e.getSignatureStatuses([t],{searchTransactionHistory:!0});function ki(e,t,n){let r=j(),o=M.signatureStatus(n),s=async()=>{if(!n)throw Er;let l=await gi(e,n);return{...l,value:l.value[0]}},u=r.getQueryData(o)?.value?.confirmationStatus;return q({queryKey:o,queryFn:s,enabled:!!n&&u!=="finalized",refetchInterval:t,staleTime:1/0})}i();a();var Ai=e=>async()=>await e.getMinimumBalanceForRentExemption(g.StakeProgram.space);function bi(e){let t=M.stakeAccountMinBalance(),n=Ai(e);return q({queryKey:t,queryFn:n,placeholderData:0,staleTime:1/0})}i();a();var vi=async(e,t,n,r="confirmed")=>await e.getInflationReward(t,n,r),hi=async(e,t)=>{let n=[];t.ownerPublicKey&&n.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&n.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});let r=await e.getParsedProgramAccounts(g.StakeProgram.programId,{filters:n}),o=[];if(t.fetchInflationRewards)try{o=await vi(e,r.map(({pubkey:s})=>s))}catch(s){let d=s;!d.message.includes("RPC request timed out")&&Q.captureError(d,"staking")}return r.map((s,d)=>({pubkey:s.pubkey.toString(),lamports:s.account.lamports,inflationReward:o[d]?.amount,...s.account.data.parsed}))},Pi=(e,t)=>M.stakeAccounts(e,t),wi=(e,t)=>()=>hi(e,{ownerPublicKey:t,fetchInflationRewards:!0});function Xt(e,t){let n=Pi(t,e.rpcEndpoint),r=wi(e,t);return q({queryKey:n,queryFn:r,placeholderData:[],staleTime:1/0})}i();a();i();a();i();a();i();a();function Zt(e,t){for(let n of t)if(n.epoch===e)return n;return null}var Fr=.09;function Ti(e,t,n){if(e.activationEpoch===e.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(t===e.activationEpoch)return{effective:BigInt(0),activating:e.stake};if(t<e.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let r=e.activationEpoch,o=Zt(r,n);if(o!==null){let s=BigInt(0);for(;o!==null;){r++;let d=e.stake-s,u=Number(d)/Number(o.activating),c=Number(o.effective)*Fr,l=BigInt(Math.max(1,Math.round(u*c)));if(s+=l,s>=e.stake){s=e.stake;break}if(r>=t||r>=e.deactivationEpoch)break;o=Zt(r,n)}return{effective:s,activating:e.stake-s}}else return{effective:e.stake,activating:BigInt(0)}}function Ur(e,t,n){let{effective:r,activating:o}=Ti(e,t,n);if(t<e.deactivationEpoch)return{effective:r,activating:o,deactivating:BigInt(0)};if(t==e.deactivationEpoch)return{effective:r,activating:BigInt(0),deactivating:r};let s=e.deactivationEpoch,d=Zt(s,n);if(d!==null){let u=r;for(;d!==null&&(s++,d.deactivating!==BigInt(0));){let c=Number(u)/Number(d.deactivating),l=Number(d.effective)*Fr,p=BigInt(Math.max(1,Math.round(c*l)));if(u-=p,u<=0){u=BigInt(0);break}if(s>=t)break;d=Zt(s,n)}return{effective:u,deactivating:u,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}i();a();var xr=function(e){if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");let t=[];return e.value.data.parsed.info.forEach(n=>{t.push({epoch:BigInt(n.epoch),effective:BigInt(n.stakeHistory.effective),activating:BigInt(n.stakeHistory.activating),deactivating:BigInt(n.stakeHistory.deactivating)})}),t},Kr=function(e){let t=BigInt(0);if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");return e.value.data.parsed.type==="delegated"&&(t=BigInt(1)),{discriminant:t,meta:{rentExemptReserve:BigInt(e.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:e.value.data.parsed.info.meta.authorized.staker,withdrawer:e.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(e.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(e.value.data.parsed.info.meta.lockup.epoch),custodian:e.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:e.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(e.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(e.value.data.parsed.info.stake.creditsObserved)}}};async function _t(e,t){let n=new g.PublicKey("SysvarStakeHistory1111111111111111111111111"),r=await e.getParsedAccountInfo(t);if(r===null||r.value===null)throw new Error("Account not found");let o=await e.getParsedAccountInfo(n);if(o===null)throw new Error("StakeHistory not found");let s=xr(o),d=await e.getEpochInfo(),u=Kr(r),{effective:c,activating:l,deactivating:p}=Ur(u.stake.delegation,BigInt(d.epoch),s),f;p>0?f="deactivating":l>0?f="activating":c>0?f="active":f="inactive";let S=BigInt(r.value.lamports)-c-u.meta.rentExemptReserve;return{state:f,active:Number(c),inactive:Number(S)}}function Di(e,t){let n=M.stakeActivationData(t);return q({queryKey:n,queryFn:async()=>{if(!t)throw Br;return await _t(e,new g.PublicKey(t))},enabled:!!t,staleTime:1/0})}i();a();i();a();var Vr=new Error("Failed to fetch staking APY");async function jr(){try{let e=await ye.api().get("/staking/v1/apy");if(!ge(e))throw Vr;let t=e.data;return Yt.parse(t).apy}catch{throw Vr}}var Cn=()=>{let e=M.stakeApy();return q({enabled:!0,queryKey:e,gcTime:st.Short,staleTime:1/0,async queryFn(){return jr()}})};i();a();function Ci({stakePubkey:e,authorizedPubkey:t,amount:n,transaction:r=new x.Transaction}){return r.add(g.StakeProgram.withdraw({stakePubkey:e,authorizedPubkey:t,toPubkey:t,lamports:n})),r}var _i=e=>{let{t}=Le(),n=j(),r=Be(),{mutateAsync:o}=Oe(e);return se({mutationFn:async({accountIdentifier:u,senderAddress:c,stakePubkey:l,authorizedPubkey:p,amount:f})=>{if(!c)throw Fe;let{networkID:S,address:m}=c,A=Ci({stakePubkey:l,authorizedPubkey:p,amount:f}),k=await ce(A,{connection:e}),P={ownerAddress:m??"",networkID:S,data:{signature:""},type:"withdrawStake",display:{summary:{topLeft:{text:t("transactionsPendingWithdrawingStake")}}}};r.approved({chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(S),type:"withdraw"});let D=await o({accountIdentifier:u,feePayer:new g.PublicKey(m),transaction:k,pendingTransactionInput:P});return r.submittedTransaction(D,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(S),method:"signAndSendTransaction"}),{networkID:S,id:D??""}},onSuccess:u=>{Re({connection:e,signature:u.id}).then(()=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ke(n)()}).catch(c=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();function Ii({ownerPublicKey:e,lamports:t,transaction:n=new x.Transaction}){let r=g.Keypair.generate();return n.add(g.StakeProgram.createAccount({fromPubkey:e,stakePubkey:r.publicKey,authorized:new g.Authorized(e,e),lamports:t})),[n,r]}function Mi({lamports:e,votePubkey:t,authorizedPubkey:n}){let[r,o]=Ii({ownerPublicKey:n,lamports:e});return r.add(Dn({stakePubkey:o.publicKey,authorizedPubkey:n,votePubkey:t})),[r,o]}var qi=e=>{let{t}=Le(),n=j(),r=Be(),{mutateAsync:o}=Oe(e);return se({mutationFn:async({accountIdentifier:u,senderAddress:c,lamports:l,votePubkey:p,authorizedPubkey:f,usdPerSol:S})=>{if(!c)throw Fe;let{networkID:m,address:A}=c,[k,P]=Mi({accountIdentifier:u,senderAddress:c,lamports:l,votePubkey:p,authorizedPubkey:f}),D=await ce(k,{connection:e}),_={ownerAddress:A??"",networkID:m,data:{signature:""},type:"createAccountAndDelegateStake",display:{summary:{topLeft:{text:t("transactionsPendingCreatingAndDelegatingStake")}}}};r.approved({chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(m),type:"delegate"});let C=await o({accountIdentifier:u,feePayer:new g.PublicKey(A),transaction:D,pendingTransactionInput:_,opts:{additionalSignerAccounts:[P]}});r.submittedTransaction(C,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(m),method:"signAndSendTransaction"});let K=Ft(l),pe=S?K.times(S):void 0;return r.createStakeAccountAndDelegateStake({sol:K.toNumber(),usd:pe?.toNumber(),voteAccountPubkey:p}),{networkID:m,id:C??""}},onSuccess:u=>{Re({connection:e,signature:u.id}).then(()=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ke(n)()}).catch(c=>{r.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();var It=I(L());i();a();var Wr=I(L());var Li=e=>{let t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t},zr=async(e,t,n)=>{let r=Li(t),o=await e.getParsedProgramAccounts(g.StakeProgram.programId,{filters:r}),d=(await Promise.allSettled(o.map(l=>_t(e,l.pubkey)))).map(l=>{if(l.status==="fulfilled")return l.value.state}),c=(await Promise.allSettled(o.map(l=>{let p=l.account.data.parsed.info?.stake.delegation.voter,f=n.get(p),S=f?.info?.keybaseUsername,m=f?.info?.iconUrl;return m?new Promise(A=>A(m)):S?Jt(S):new Promise(A=>A(null))}))).map(l=>{if(l.status==="fulfilled"&&l.value!==null)return l.value});return o.map((l,p)=>({pubkey:l.pubkey.toString(),lamports:l.account.lamports,activationState:d[p],imageUri:c[p],...l.account.data.parsed}))},Gr=(e,t)=>M.convertStakeAccountList(e,t),Ri=(e,t,n)=>()=>zr(e,{ownerPublicKey:t},n);function Qr(e,t,n,r=!0){let o=Gr(t,e.rpcEndpoint),s=Ri(e,t,n);return q({queryKey:o,queryFn:s,enabled:!!t&&r,staleTime:1/0})}var Hr=(e,t,n,r)=>{let o=j();return(0,Wr.useCallback)(async()=>{r&&await o.prefetchQuery({queryKey:Gr(t,e.rpcEndpoint),queryFn:()=>zr(e,{ownerPublicKey:t},n)})},[o,t,e,n,r])};i();a();var le=I(L()),en=null,Oi=e=>{if(!en&&e){let t="liquidStake";en=new jt(e,t)}if(!en)throw new Error("liquidStakeAnalytics was not properly configured");return en},fe=()=>{let e=Ut(),t=Oi(e),n=(0,le.useCallback)((m,A)=>{e.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:m,stakeAccountBalance:A}}})},[e]),r=(0,le.useCallback)(m=>{e.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:m}}})},[e]),o=(0,le.useCallback)(()=>{e.capture("liquidStakingConvertBannerClicked")},[e]),s=(0,le.useCallback)(()=>{e.capture("liquidStakingConvertBannerSeen")},[e]),d=(0,le.useCallback)(()=>{e.capture("liquidStakingConvertModalContinue")},[e]),u=(0,le.useCallback)(()=>{e.capture("liquidStakingConvertModalNotNow")},[e]),c=(0,le.useCallback)(({provider:m,convertDetails:A,amount:k,fromAmount:P,toAmount:D,fromAmountUSD:_,toAmountUSD:C})=>{e.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:m?.stakePoolAddress,token:m?.stakePoolTokenMetadata.metadata.name,fromAmount:P,toAmount:D,fromAmountUSD:_,toAmountUSD:C,apy:m?.apy,convertRatio:m?.convertRatio,caip19:m?.stakePoolTokenMetadata.caip19,validatorName:A?.validatorName,stakeAccountBalance:k}}})},[e]),l=(0,le.useCallback)(m=>{t.submittedTransaction(m,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[t]),p=(0,le.useCallback)(({amount:m,convertDetails:A,provider:k})=>{e.capture("liquidStakingConvertSuccess",{data:{stake:{apy:k?.apy,convertRatio:k?.convertRatio,caip19:k?.stakePoolTokenMetadata.caip19,stakePoolAddress:k?.stakePoolAddress,token:k?.stakePoolTokenMetadata.metadata.name,totalAmount:m,validatorName:A?.validatorName}}})},[e]),f=(0,le.useCallback)(({amount:m,convertDetails:A})=>{e.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:A?.validatorName,stakeAccountBalance:m}}})},[e]),S=(0,le.useCallback)(()=>{e.capture("liquidStakingConvertMoreClicked")},[e]);return{trackConvertStakeAccountClicked:n,trackConvertStakeAccountListSeen:r,trackConvertBannerClicked:o,trackConvertBannerSeen:s,trackConvertModalContinue:d,trackConvertModalNotNow:u,trackConvertApprovedByUser:c,trackConvertFailed:f,trackConvertSubmitted:l,trackConvertSuccess:p,trackConvertMoreClicked:S}};var Ei=e=>{let{connection:t}=H(),{data:n}=W("solana"),r=v(p=>p.setSkipDismissRouting),{trackConvertModalContinue:o,trackConvertModalNotNow:s}=fe(),{results:d,isFetched:u}=Ne(t),c=(0,It.useMemo)(()=>new Map(d.map(p=>[p.voteAccountPubkey,p])),[d]),l=Hr(t,n?.address??"",c,u);return(0,It.useEffect)(()=>{l()},[l]),(0,It.useEffect)(()=>{r(e)},[e,r]),{trackConvertModalContinue:o,trackConvertModalNotNow:s}};i();a();i();a();var Mt=I(L());i();a();i();a();var Yr=new Error("Failed to fetch Average Validator APY");async function $r(){let e=await ye.api().get("/staking/v1/avg-validator-apy");if(!ge(e))throw Yr;let t=Yt.safeParse(e.data);if(t.success)return t.data.apy;throw Yr}var Jr=()=>{let e=M.averageValidatorApy();return q({enabled:!0,queryKey:e,gcTime:tt({hours:1}),staleTime:1/0,async queryFn(){return $r()}})};i();a();i();a();var Xr=new Error("Failed to fetch liquid staking supported tokens"),Bi=new Error("Missing supported tokens in response");async function Zr(){try{let e=await ye.api().get("/liquid-staking/v1/supported-tokens");if(!ge(e))throw Xr;let t=_r.safeParse(e.data.supportedTokens);if(!t.success)throw Bi;return t.data}catch{throw Xr}}var tn=()=>{let e=M.liquidStakingSupportedTokens();return q({queryKey:e,staleTime:tt({minutes:15}),async queryFn(){return await Zr()}})};var nn=e=>{let t=v(m=>m.setProvider),n=v(m=>m.setFungibleToStake),r=v(m=>m.setSkipDismissRouting),o=(0,Mt.useMemo)(()=>e?rt(Ee(e)):"",[e]),{data:s,isPending:d}=Jr(),u=s?s/100:null,{data:c={},isPending:l}=tn(),p=(0,Mt.useMemo)(()=>c[o]??[],[o,c]),f=p?p[0]:void 0,S=(0,Mt.useCallback)(m=>{f&&e&&(n(e),t(f),r(m))},[e,f,n,t,r]);return{isLoading:l||d,isSupported:p.length>0,providers:p,initLiquidStake:S,defaultProvider:f,avgValidatorApy:u}};var Ue=e=>{let t=Tr.get(e);return nn(t)};i();a();var dt=I(L());i();a();var ct=I(L());var lt=e=>{let{data:[t]}=pr(["kill-liquid-staking-convert"]),n=e?.validators,r=(0,ct.useMemo)(()=>n?new Map(n.map(C=>[C.vote_account,C])):new Map,[n]),{connection:o}=H(),{data:s}=W("solana"),{results:d,isFetched:u,isError:c}=Ne(o),l=(0,ct.useMemo)(()=>new Map(d.map(C=>[C.voteAccountPubkey,C])),[d]),{data:p,isLoading:f,isFetching:S,error:m,refetch:A}=Qr(o,s?.address??"",l,u||c),k=f||S,P=(0,ct.useMemo)(()=>k||!p?[]:p.map(C=>Fi(C,l,r)).sort((C,K)=>C.lamports>K.lamports?-1:1),[k,p,l,r]),D=(0,ct.useMemo)(()=>P.filter(C=>C.eligible),[P]),_=(0,ct.useMemo)(()=>P.filter(C=>!C.eligible),[P]);return{hasConvertibleStakeAccounts:!t&&D.length>0,eligibleStakeAccounts:D,inelegibleStakeAccounts:_,isLoadingList:k,error:m,refetch:A}},Fi=(e,t,n)=>{let r=Lr(e,n),o=Ui(e,t),s=e.lamports;return{...e,amount:s,eligible:r,title:o,imageUri:e.imageUri}},Ui=(e,t)=>{let n="";if(e.type==="delegated"){let{voter:r}=e.info.stake.delegation,o=t.get(r),s=o?.info?.keybaseUsername;n=o?.info?.name??s??fr(r)}else e.type==="initialized"&&(n=e.pubkey);return n};var xi=e=>{let t=v(k=>k.setConvertStakeAccount),n=v(k=>k.setAmount),r=v(k=>k.fungibleToStake),o=v(k=>k.provider),{initLiquidStake:s}=Ue(w.solana.mainnetID);(0,dt.useEffect)(()=>{s()},[s]);let{trackConvertStakeAccountClicked:d,trackConvertStakeAccountListSeen:u}=fe(),{error:c,refetch:l,isLoadingList:p,eligibleStakeAccounts:f,inelegibleStakeAccounts:S}=lt(o);(0,dt.useEffect)(()=>{p||u([...f,...S].map(k=>({title:k.title,amount:k.amount,eligible:k.eligible})))},[u,f,S,p]);let m=(0,dt.useCallback)(k=>{let P=k?.info?.stake?.delegation?.voter??"",D=`${k?.lamports??"0"}`,_=k?.title??"";t({validatorVote:P,stakeAccount:k.pubkey,validatorName:_,eligibleAccountsCount:f.length}),n(D),d(_,D),e()},[d,f.length,e,t,n]),A=(0,dt.useCallback)(()=>{l()},[l]);return{isLoading:p,error:c,eligibleStakeAccounts:f,inelegibleStakeAccounts:S,onReload:A,onSelectStakeAccount:m,tokenSymbol:r?.data.symbol??"",tokenDecimals:r?.data.decimals??0}};i();a();var z=I(L());i();a();function rn(e){return e instanceof Ye?e:new Ye("UnknownError")}i();a();var eo=I(L());var on=({txReceipt:e,isTxError:t,poolTokenFungible:n,invalidateQueries:r,dismissLiquidStaking:o})=>{let s=v(l=>l.resetStaking),d=v(l=>l.setNavigateTo),u=v(l=>l.setSkipDismissRouting),c=v(l=>l.skipDismissRouting);return(0,eo.useCallback)(()=>{if(s(),!e||t)return o();if(r(),c)return u(void 0),o();d(n?{screen:"FungibleDetail",fungible:n}:{screen:"Activity"}),o()},[e,t,n,r,o,d,s,c,u])};i();a();var an=I(L());i();a();var to=({connection:e})=>{let t=Tt(),n=Sr();return se({mutationFn:async({accountIdentifier:o,ownerAddress:s,pendingActivityRow:d,activityType:u,transactionData:{networkID:c,transaction:l,signers:p}})=>{if(w.isSolanaNetworkID(c)){await rr(l,e);let f={ownerAddress:s,networkID:c,data:{signature:""},type:u,display:{summary:d}};return{id:await Ar({accountIdentifier:o,feePayer:new g.PublicKey(s),connection:e,accountSigner:n,transaction:l,pendingTransactionInput:f,storage:t,opts:{additionalSignerAccounts:p}}),networkID:c}}throw new Error(`Unsupported network for liquid staking: ${c}`)}})};function sn({isLoadingPoolToken:e,pendingActivityRow:t,onTransactionSubmitted:n,onTransactionFailed:r}){let{connection:o}=H(),s=v(k=>k.transactionData),d=v(k=>k.fungibleToStake),{data:u,isLoading:c}=He(),{mutateAsync:l}=to({connection:o}),f=(0,an.useMemo)(()=>(u?.addresses??[]).find(k=>k.networkID===d?.data.chain.id),[d?.data.chain.id,u?.addresses])?.address??"",S=u?.identifier??"";return{executeLiquidStake:(0,an.useCallback)(async()=>{try{if(!s)throw new Ye("MissingTransactionData");let k=await l({accountIdentifier:S,ownerAddress:f,pendingActivityRow:t,activityType:"convertStake",transactionData:s});n(k)}catch(k){r(k)}},[S,f,t,s,l,n,r]),isReadyToExecute:!c&&!e}}i();a();var no=I(L());var un=()=>{let e=j();return(0,no.useCallback)(()=>ke(e)(),[e])};i();a();var cn=I(L());i();a();function ro({key:e,queryKey:t,defaultValue:n=null}){let r=Tt();return q({enabled:!0,queryKey:t,gcTime:st.Long,staleTime:1/0,async queryFn(){try{return await r.get(e)}catch(o){return o instanceof Error&&Q.captureError(o,"staking"),n}}})}function oo({key:e,queryKey:t}){let n=Tt(),r=j();return se({async mutationFn(o){try{return await n.set(e,o)}catch(s){s instanceof Error&&Q.captureError(s,"staking");return}},async onMutate(o){await r.cancelQueries({queryKey:t});let s=r.getQueryData(t);return r.setQueryData(t,o),{previousValue:s}},onError(o,s,d){r.setQueryData(t,d?.previousValue)}})}var Vi=Nt.object({convert:Nt.boolean(),mint:Nt.boolean()}),_n={convert:!1,mint:!1},ji=JSON.stringify(_n),pt=()=>{let{data:e}=ro({key:"featureUsed",queryKey:M.featureUsed(),defaultValue:ji}),t=(0,cn.useMemo)(()=>{if(!e)return _n;let o=Vi.safeParse(JSON.parse(e));return o.success?o.data:_n},[e]),{mutateAsync:n}=oo({key:"featureUsed",queryKey:M.featureUsed()}),r=(0,cn.useCallback)(async o=>{let s={...t,...o};await n(JSON.stringify(s))},[n,t]);return{usageState:t,setUsageState:r}};var zi="https://www.jito.network/defi/";function Gi({stakedTokenSymbol:e,poolTokenSymbol:t,txHash:n,txError:r,confirmationStatus:o,eligibleAccountsCount:s,onDismiss:d,onConvertMore:u}){let c={title:T.t("commandClose"),onPress:d},l={title:T.t("convertStakeStatusConvertMore"),onPress:u},p={txHash:n,txHashTitle:T.t("commandViewTransaction")};return r?{type:"error",title:T.t("convertStakeStatusErrorTitle"),message:T.t("convertStakeStatusErrorMessage",{poolTokenSymbol:t}),...p,primaryButton:c}:o==="confirmed"?{type:"success",title:T.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:t}),message:"",...p,...s>1?{primaryButton:l,secondaryButton:c}:{primaryButton:c}}:{type:"loading",title:T.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:T.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:e,poolTokenSymbol:t}),...p,primaryButton:c}}var Qi=({dismissConvertFlow:e,goToConvertAccountList:t})=>{let n=un(),[r,o]=(0,z.useState)("loading"),[s,d]=(0,z.useState)(),[u,c]=(0,z.useState)(),{trackConvertSubmitted:l,trackConvertSuccess:p,trackConvertFailed:f,trackConvertMoreClicked:S}=fe(),{usageState:m,setUsageState:A}=pt(),k=v(B=>B.fungibleToStake),P=v(B=>B.provider),D=v(B=>B.convert),_=v(B=>B.amount),[C]=(0,z.useState)(D?.eligibleAccountsCount??0),K=v(B=>B.setConvertStakeAccount),pe=v(B=>B.setTransactionData),Ie=k?.data.symbol??"",Me=P?.stakePoolTokenMetadata.metadata.symbol??"",bt=P?.stakePoolTokenMetadata.metadata.address??"",{data:ze}=He(),$e=ze?.type==="ledger",vt=(0,z.useMemo)(()=>(ze?.addresses??[]).find(B=>B.networkID===k?.data.chain.id),[k?.data.chain.id,ze?.addresses])?.addressType??"solana",{fungible:ht,isLoadingTokens:Pt}=ie({key:bt}),Je=(0,z.useCallback)(B=>{l(B.id),d(B),m.convert||A({convert:!0})},[A,l,m.convert]),Ge=(0,z.useCallback)(B=>{f({amount:_,convertDetails:D});let ci=rn(B);c(ci)},[f,_,D]),V=(0,z.useMemo)(()=>({topLeft:{text:T.t("convertStakePendingTitle",{symbol:Me})}}),[Me]),{executeLiquidStake:Ce,isReadyToExecute:Xe}=sn({isLoadingPoolToken:Pt,pendingActivityRow:V,onTransactionSubmitted:Je,onTransactionFailed:Ge}),E=(0,z.useCallback)(()=>{p({amount:_,convertDetails:D,provider:P}),K(void 0),pe(void 0),n()},[_,p,K,pe,n,P,D]),{isSuccess:Ze,isError:wt,error:Bt}=Wt(E,s);(0,z.useEffect)(()=>{Ze?o("confirmed"):wt&&(o("error"),c(Bt),f({amount:_,convertDetails:D}))},[_,D,Ze,wt,f,Bt,s]);let er=on({txReceipt:s,isTxError:wt,poolTokenFungible:ht,invalidateQueries:n,dismissLiquidStaking:e}),tr=(0,z.useCallback)(()=>{S(),t()},[S,t]),ui=(0,z.useMemo)(()=>Gi({stakedTokenSymbol:Ie,poolTokenSymbol:Me,txHash:s?.id,txError:u,confirmationStatus:r,eligibleAccountsCount:C,onDismiss:er,onConvertMore:tr}),[Ie,Me,s?.id,u,r,C,er,tr]);return{addressType:vt,isLedger:$e,isReadyToExecute:Xe,statusPageProps:ui,txError:u,executeLiquidStake:Ce,learnMoreLink:zi}};i();a();var mt=I(L()),ln=null,Hi=e=>{if(!ln&&e){let t="liquidStake";ln=new jt(e,t)}if(!ln)throw new Error("liquidStakeAnalytics was not properly configured");return ln},qt=()=>{let e=Ut(),t=Hi(e),n=(0,mt.useCallback)(()=>{e.capture("liquidStakingMintModalContinueClicked")},[e]),r=(0,mt.useCallback)(({provider:u,payAmount:c,receiveAmount:l,payAmountUSD:p,receiveAmountUSD:f,payAssetTitle:S,providerName:m,receiveAssetTitle:A})=>{e.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:u?.stakePoolAddress,token:u?.stakePoolTokenMetadata.metadata.name,apy:u?.apy,convertRatio:u?.convertRatio,caip19:u?.stakePoolTokenMetadata.caip19,payAmount:c,receiveAmount:l,payAmountUSD:p,receiveAmountUSD:f,payAssetTitle:S,receiveAssetTitle:A,providerName:m}}})},[e]),o=(0,mt.useCallback)(u=>{t.submittedTransaction(u,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[t]),s=(0,mt.useCallback)(({provider:u,amount:c})=>{e.capture("liquidStakingMintSuccess",{data:{stake:{apy:u?.apy,convertRatio:u?.convertRatio,caip19:u?.stakePoolTokenMetadata.caip19,stakePoolAddress:u?.stakePoolAddress,token:u?.stakePoolTokenMetadata.metadata.name,totalAmount:c}}})},[e]),d=(0,mt.useCallback)(u=>{e.capture("liquidStakingMintFailed",{data:{stake:{amount:u}}})},[e]);return{trackMintModalContinue:n,trackMintSubmitted:o,trackMintSuccess:s,trackMintFailed:d,trackMintApprovedByUser:r}};i();a();var Se=I(L());i();a();var Yi=2,io=({networkID:e,poolTokenMintAddress:t})=>{let n=w.getAddressType(e),{data:r}=W(e),{fungible:o}=ie({key:t}),s=hr(e,n),{fungible:d}=ie({key:s}),u=N(d?.data.amount??""),{data:c=0}=zt(r),l=N(Ht).plus(N(it).multipliedBy(Qt)),p=N(c),f=N(c),S=N(Yi).plus(l),m=o?N(S).plus(p):N(f).plus(S).plus(p),A=N(u).minus(m),k=N.max(A,0);return{minAmount:m,maxAmount:k,balance:u}};var $i=({goBack:e,goToReviewPage:t,showInfoPage:n})=>{let r=v(V=>V.fungibleToStake),o=v(V=>V.provider),s=v(V=>V.amount),d=v(V=>V.setAmount),u=r?.data.symbol??"",c=r?.data.chain.id??w.solana.mainnetID,l=r?.data.decimals??0,p=o?.stakePoolTokenMetadata.metadata.address??"",[f,S]=(0,Se.useState)(s?dr(s,l):""),{data:m}=W("solana"),{initLiquidStake:A}=Ue(w.solana.mainnetID);(0,Se.useEffect)(()=>{A()},[A]),Or(m,"STAKE_FUNGIBLE");let{minAmount:k,maxAmount:P,balance:D}=io({networkID:c,poolTokenMintAddress:p}),_=qe(P,l),C=qe(k,l),K=qe(D,l),pe=lr(f,l).toString(),Ie=N(pe),Me=Ie.isLessThan(k),bt=Ie.isGreaterThan(P),ze=Ie.isFinite(),$e=pe&&Me?T.t("mintLiquidStakeAmountMinRequired",{symbol:u,amount:C}):pe&&bt?T.t("mintLiquidStakeAmountInsufficientBalance"):void 0,Et=ze&&!$e,vt=(0,Se.useMemo)(()=>{if(!o)return;let V=Qe(Number.parseFloat(o.apy)),{address:Ce,name:Xe,symbol:E,logoURI:Ze}=o.stakePoolTokenMetadata.metadata,wt=N(1).dividedBy(N(o.convertRatio)),Bt=`1 ${u} \u2248 ${at(wt)} ${E}`;return{identifier:Ce,apy:V,name:Xe,symbol:E,rate:Bt,logoURI:Ze}},[o,u]),ht=(0,Se.useCallback)(()=>{S(String(_))},[_]),Pt=(0,Se.useCallback)(V=>{let Ce=cr(V);qr(Ce,l??9)&&S(Ce)},[l]),Je=(0,Se.useCallback)(()=>{d(pe),t()},[pe,t,d]),Ge=(0,Se.useCallback)(()=>{d(""),e()},[d,e]);return{amount:f,amountError:$e,balance:K,symbol:u,poolToken:vt,canSubmit:Et,onBack:Ge,onContinue:Je,onChangeAmount:Pt,onSetMax:ht,onInfoPress:n}};i();a();var ne=I(L());var Ji="https://www.jito.network/defi/";function Xi({poolTokenSymbol:e,txHash:t,txError:n,confirmationStatus:r,onDismiss:o}){let s={title:T.t("commandClose"),onPress:o},d={txHash:t,txHashTitle:T.t("commandViewTransaction")};return n?{type:"error",title:T.t("mintStakeStatusErrorTitle"),message:T.t("mintStakeStatusErrorMessage",{poolTokenSymbol:e}),...d,primaryButton:s}:r==="confirmed"?{type:"success",title:T.t("mintStakeStatusSuccessTitle",{poolTokenSymbol:e}),message:"",...d,primaryButton:s}:{type:"loading",title:T.t("mintStakeStatusLoadingTitle",{poolTokenSymbol:e}),message:T.t("mintStakeStatusLoadingMessage",{poolTokenSymbol:e}),...d,primaryButton:s}}var Zi=e=>{let t=un(),[n,r]=(0,ne.useState)("loading"),[o,s]=(0,ne.useState)(),[d,u]=(0,ne.useState)(),{trackMintSubmitted:c,trackMintSuccess:l,trackMintFailed:p}=qt(),{usageState:f,setUsageState:S}=pt(),m=v(E=>E.fungibleToStake),A=v(E=>E.provider),k=v(E=>E.setTransactionData),P=v(E=>E.amount),D=A?.stakePoolTokenMetadata.metadata.symbol??"",_=A?.stakePoolTokenMetadata.metadata.address??"",{data:C}=He(),K=C?.type==="ledger",Ie=(0,ne.useMemo)(()=>(C?.addresses??[]).find(E=>E.networkID===m?.data.chain.id),[m?.data.chain.id,C?.addresses])?.addressType??"solana",{fungible:Me,isLoadingTokens:bt}=ie({key:_}),ze=(0,ne.useCallback)(E=>{c(E.id),s(E),f.mint||S({mint:!0})},[S,c,f.mint]),$e=(0,ne.useCallback)(E=>{p(P);let Ze=rn(E);u(Ze)},[p,P]),Et=(0,ne.useMemo)(()=>({topLeft:{text:T.t("mintLiquidStakePendingTitle",{symbol:D})}}),[D]),{executeLiquidStake:vt,isReadyToExecute:ht}=sn({isLoadingPoolToken:bt,pendingActivityRow:Et,onTransactionSubmitted:ze,onTransactionFailed:$e}),Pt=(0,ne.useCallback)(()=>{l({amount:P,provider:A}),k(void 0),t()},[l,P,A,k,t]),{isSuccess:Je,isError:Ge,error:V}=Wt(Pt,o);(0,ne.useEffect)(()=>{Je?r("confirmed"):Ge&&(r("error"),u(V),p(P))},[Je,p,P,Ge,V,o]);let Ce=on({txReceipt:o,isTxError:Ge,poolTokenFungible:Me,invalidateQueries:t,dismissLiquidStaking:e}),Xe=(0,ne.useMemo)(()=>Xi({poolTokenSymbol:D,txHash:o?.id,txError:d,confirmationStatus:n,onDismiss:Ce}),[D,o?.id,d,n,Ce]);return{addressType:Ie,isLedger:K,isReadyToExecute:ht,statusPageProps:Xe,learnMoreLink:Ji,txError:d,executeLiquidStake:vt}};i();a();var ao=I(L());function ea(e){return typeof e=="string"?e:e?rt(Ee(e)):""}var ta=e=>{let t=ea(e),{data:n={}}=tn();return(0,ao.useMemo)(()=>!!Object.values(n).flat().find(r=>r.stakePoolTokenMetadata.caip19===t),[t,n])};i();a();var so=I(L());var na=({onLiquidStake:e,onNativeStake:t})=>{let n=Dr,{defaultProvider:r,avgValidatorApy:o}=Ue(nt.Solana.Mainnet);return{options:(0,so.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:T.t("stakeMethodSelectionLiquidStakingTitle"),description:T.t("stakeMethodSelectionLiquidStakingDescription"),apy:r?T.t("stakeMethodEstApy",{apy:Qe(parseFloat(r.apy))}):null,onClick:e},{type:"native",isRecommended:!1,title:T.t("stakeMethodSelectionNativeStakingTitle"),description:T.t("stakeMethodSelectionNativeStakingDescription"),apy:o?T.t("stakeMethodEstApy",{apy:Qe(o)}):null,onClick:t}],[o,r,e,t]),learnMoreLink:n}};i();a();var ft=I(L());i();a();i();a();var uo=new Error("Failed to fetch recommended staking validators.");async function co(){try{let e=await ye.api().get("/staking/v1/recommended");if(!ge(e))throw uo;let t=e.data;return Cr.parse(t).validators}catch{throw uo}}var In=()=>{let e=M.recommendedValidators();return q({enabled:!0,queryKey:e,gcTime:st.Long,staleTime:1/0,async queryFn(){return co()}})};function ra(){let{connection:e}=H(),t=Ne(e),{results:n=[]}=t,r=In(),{data:o=null,isFetched:s}=Cn(),d=ar.isFeatureEnabled("kill-phantom-validator"),[u,c]=(0,ft.useState)(""),l=sr(u),p=(0,ft.useMemo)(()=>{let P=n.map(C=>({...C,totalApy:o?Ir(o,C?.commission):null})),D=r.data??[];if(D.length===0)return P;let _=P.sort(Mr(D));return d?_.filter(C=>C.identityPubkey!==Rr.identityPublicKey):_},[n,r.data,o,d]),f=ur(p,l||"",wr),S=(0,ft.useCallback)(()=>{t.isError&&!t.isFetching&&t.refetch(),r.isError&&!r.isFetching&&r.refetch()},[r,t]),m=!t.isFetched||!s||!r.isFetched,A=t.isError||r.isError,k=t.isSuccess;return{isLoading:m,isSuccess:k,hasError:A,searchResults:f,showApy:o!==null,onRefetch:S,searchTerm:u,setSearchTerm:c}}i();a();i();a();var ri=I(L());i();a();i();a();i();a();var Go=I(Wo());i();a();var zo=I(li()),Ns=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],vn=e=>{let t=`${String.fromCharCode(...Ns)}||${e}`,n=ir(Buffer.from(t));return zo.default.encode(n)};var Jn=async({connection:e,stakePoolAddress:t,ownerAddress:n,validatorVoteAddress:r,stakeAccountAddress:o,poolTokenAccountAddress:s})=>{let d=new g.PublicKey(t),u=new g.PublicKey(n),c=new g.PublicKey(r),l=new g.PublicKey(o),p=s?new g.PublicKey(s):void 0,f=new g.PublicKey(vn(n)),{instructions:S,signers:m}=await(0,Go.depositStake)(e,u,d,u,c,l,p,[{pubkey:f,isSigner:!1,isWritable:!1}]),A=(await e.getLatestBlockhash("confirmed")).blockhash,k=new x.VersionedTransaction(new x.TransactionMessage({instructions:S,payerKey:u,recentBlockhash:A}).compileToV0Message());return{transaction:await ce(k,{connection:xt(nt.Solana.Mainnet),calculators:{cost:Vt,budget:new Kt(2e5,2e5)}}),signers:m}};i();a();i();a();var Fs=I(nr());i();a();var Ot=new g.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy");i();a();var Qo=Object.freeze({DepositStake:{index:9,layout:et.struct([et.u8("instruction")])},DepositSol:{index:14,layout:et.struct([et.u8("instruction"),et.ns64("lamports")])}});function Ho(e,t){let n=e.layout.span,r=Buffer.alloc(n),o=Object.assign({instruction:e.index},t);return e.layout.encode(o,r),r}var hn=class{static depositStake(t){let{stakePool:n,validatorList:r,depositAuthority:o,withdrawAuthority:s,depositStake:d,validatorStake:u,reserveStake:c,destinationPoolAccount:l,managerFeeAccount:p,referralPoolAccount:f,poolMint:S,referralAccount:m}=t,A=Qo.DepositStake,k=Ho(A),P=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:Tn,isSigner:!1,isWritable:!1},{pubkey:g.StakeProgram.programId,isSigner:!1,isWritable:!1}];return m&&P.push({pubkey:m,isSigner:!1,isWritable:!1}),new x.TransactionInstruction({programId:Ot,keys:P,data:k})}static depositSol(t){let{stakePool:n,withdrawAuthority:r,depositAuthority:o,reserveStake:s,fundingAccount:d,destinationPoolAccount:u,managerFeeAccount:c,referralPoolAccount:l,poolMint:p,lamports:f,referralAccount:S}=t,m=Qo.DepositSol,A=Ho(m,{lamports:f}),k=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:g.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Tn,isSigner:!1,isWritable:!1}];return o&&k.push({pubkey:o,isSigner:!0,isWritable:!1}),S&&k.push({pubkey:S,isSigner:!1,isWritable:!1}),new x.TransactionInstruction({programId:Ot,keys:k,data:A})}};i();a();var h=I(Qn()),We=[(0,h.u64)("denominator"),(0,h.u64)("numerator")],Yo=(0,h.struct)([(0,h.u8)("accountType"),(0,h.publicKey)("manager"),(0,h.publicKey)("staker"),(0,h.publicKey)("stakeDepositAuthority"),(0,h.u8)("stakeWithdrawBumpSeed"),(0,h.publicKey)("validatorList"),(0,h.publicKey)("reserveStake"),(0,h.publicKey)("poolMint"),(0,h.publicKey)("managerFeeAccount"),(0,h.publicKey)("tokenProgramId"),(0,h.u64)("totalLamports"),(0,h.u64)("poolTokenSupply"),(0,h.u64)("lastUpdateEpoch"),(0,h.struct)([(0,h.u64)("unixTimestamp"),(0,h.u64)("epoch"),(0,h.publicKey)("custodian")],"lockup"),(0,h.struct)(We,"epochFee"),(0,h.option)((0,h.struct)(We),"nextEpochFee"),(0,h.option)((0,h.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,h.option)((0,h.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,h.struct)(We,"stakeDepositFee"),(0,h.struct)(We,"stakeWithdrawalFee"),(0,h.option)((0,h.struct)(We),"nextStakeWithdrawalFee"),(0,h.u8)("stakeReferralFee"),(0,h.option)((0,h.publicKey)(),"solDepositAuthority"),(0,h.struct)(We,"solDepositFee"),(0,h.u8)("solReferralFee"),(0,h.option)((0,h.publicKey)(),"solWithdrawAuthority"),(0,h.struct)(We,"solWithdrawalFee"),(0,h.option)((0,h.struct)(We),"nextSolWithdrawalFee"),(0,h.u64)("lastEpochPoolTokenSupply"),(0,h.u64)("lastEpochTotalLamports")]);async function Us(e,t){let n=await e.getAccountInfo(t);if(!n)throw new Error("Invalid stake pool account");return{pubkey:t,account:{data:Yo.decode(n.data),executable:n.executable,lamports:n.lamports,owner:n.owner}}}async function xs(e,t){let[n]=await g.PublicKey.findProgramAddress([t.toBuffer(),Buffer.from("withdraw")],e);return n}function Ks(e){if(typeof e=="number")return Math.abs(e)/g.LAMPORTS_PER_SOL;if(typeof e=="bigint")return Math.abs(Number(e))/g.LAMPORTS_PER_SOL;let t=1;e.isNeg()&&(t=-1);let r=e.abs().toString(10).padStart(10,"0"),o=r.length-9,s=r.slice(0,o)+"."+r.slice(o);return t*parseFloat(s)}async function $o(e,t,n,r,o,s,d,u){let c=await e.getBalance(n,"confirmed");if(c<r)throw new Error(`Not enough SOL to deposit into pool. Maximum deposit amount is ${Ks(c)} SOL.`);let p=(await Us(e,t)).account.data,f=new g.Keypair,S=[f],m=[];if(m.push(g.SystemProgram.transfer({fromPubkey:n,toPubkey:f.publicKey,lamports:r})),!o){let k=gr(p.poolMint,n);m.push(kr(n,k,n,p.poolMint)),o=k}let A=await xs(Ot,t);return m.push(hn.depositSol({stakePool:t,reserveStake:p.reserveStake,fundingAccount:f.publicKey,destinationPoolAccount:o,managerFeeAccount:p.managerFeeAccount,referralPoolAccount:d??o,poolMint:p.poolMint,lamports:r,withdrawAuthority:A,depositAuthority:u,referralAccount:s})),{instructions:m,signers:S}}var Xn=async({connection:e,stakePoolAddress:t,ownerAddress:n,amount:r,poolTokenAccountAddress:o})=>{let s=new g.PublicKey(t),d=new g.PublicKey(n),u=o?new g.PublicKey(o):void 0,c=new g.PublicKey(vn(n)),{instructions:l,signers:p}=await $o(e,s,d,r,u,c),f=(await e.getLatestBlockhash("confirmed")).blockhash,S=new x.VersionedTransaction(new x.TransactionMessage({instructions:l,payerKey:d,recentBlockhash:f}).compileToV0Message());return{transaction:await ce(S,{connection:xt(nt.Solana.Mainnet),calculators:{cost:Vt,budget:new Kt(2e5,2e5)}}),signers:p}};var Jo=e=>{let t=M.getConvertStakeTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,validatorVoteAddress:e.validatorVoteAddress,stakeAccountAddress:e.stakeAccountAddress,poolTokenAccountAddress:e.poolTokenAccountAddress}),n=!!e.stakePoolAddress&&!!e.ownerAddress&&!!e.validatorVoteAddress&&!!e.stakeAccountAddress;return q({enabled:n,queryKey:t,staleTime:1/0,async queryFn(){if(w.isSolanaNetworkID(e.networkId)){let{transaction:r,signers:o}=await Jn(e);return{networkID:e.networkId,transaction:r,signers:o}}throw new Error(`Unsupported networkId: ${e.networkId}`)}})};i();a();var ni=I(L());i();a();var Xo=(e,t)=>{let n=[],r=e?Ee(e):void 0,o=mr(t?.stakePoolTokenMetadata.caip19??"");return r&&o&&(n.push(r),n.push(o)),{query:{data:n}}};i();a();var Zn=I(L()),Vs=(e,t)=>{if(t===void 0)return;let n=Ee(e),r=rt(n);return t[r]},js=(e,t)=>{if(!t)return N(0);let n=new N(t.convertRatio);return qe(e,t.stakePoolTokenMetadata.metadata.decimals).div(n)},Ws=(e,t,n)=>{if(!e)return null;let r=qe(t,e.data.decimals),o=Vs(e,n),s=o?.usd?r.multipliedBy(o.usd):null;return{amount:at(r),amountUsd:s?s.toNumber():null,border:!1,logoUri:e.data.logoUri??null,network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:e.type??"SolanaNative",title:T.t("liquidStakeReviewYouPay")}},zs=(e,t,n,r)=>{if(!t||!e)return null;let o=js(n,t),s=r?r[t.stakePoolTokenMetadata.caip19]:void 0,d=s?.usd?o.multipliedBy(s.usd):null;return{amount:at(o),amountUsd:d?d.toNumber():null,border:!1,network:{id:t.stakePoolTokenMetadata.metadata.chainId??"solana:101",name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},logoUri:t.stakePoolTokenMetadata.metadata.logoURI??null,symbol:t.stakePoolTokenMetadata.metadata.symbol,title:T.t("liquidStakeReviewYouReceive"),tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:"SPL"}},Zo=({process:e,fungibleToStake:t,amount:n,provider:r,selectedChainAddress:o,transactionFees:s,isLoading:d,canSubmit:u,priceMap:c,networkFeeErrorMsg:l})=>{let p=(0,Zn.useMemo)(()=>Ws(t,n,c),[t,n,c]),f=(0,Zn.useMemo)(()=>zs(t,r,n,c),[t,r,n,c]),S=r?.name??"",m=o?.address??"",A=r?.apy!==void 0?Qe(Number.parseFloat(r.apy)):"",k=`${at(qe(s,t?.data.decimals??0))} ${t?.data.symbol}`,P=T.t("stakeReviewAccount"),D=T.t("liquidStakeReviewProvider"),_=T.t("stakeReviewAPY"),C=T.t("liquidStakeReviewNetworkFee"),K=T.t(e==="convert"?"commandConvert":"commandStake");return{process:e,payAsset:p,receiveAsset:f,account:m,providerName:S,apy:A,networkFee:k,accountLabelText:P,providerLabelText:D,apyLabelText:_,networkFeeLabelText:C,primaryButtonText:K,isLoading:d,canSubmit:u,networkFeeErrorMsg:l}};i();a();var ei=I(L());var Gs=tt({seconds:10}),ti=({hasPoolTokenAccount:e,chainAddress:t,transactionData:n})=>{let{data:r,isPending:o,isFetched:s,isSuccess:d}=br({networkID:n?.networkID??w.solana.mainnetID,multichainTransaction:Hs(n),queryOptions:{refetchInterval:Gs}}),{data:u=0}=zt(t),c=G(Ht).plus(G(it).multipliedBy(Qt)),l=e?G(c):G(u).plus(c),{hasSufficientFunds:p,isLoading:f,nativeTokenSymbol:S}=Pr(n?.networkID??w.solana.mainnetID,t?.addressType,r,l),m=Ys({hasSufficientFunds:p,hasGasEstimationFailed:s&&!d,nativeTokenSymbol:S}),A=Qs(r),k=l.plus(A),P=o||f;return(0,ei.useMemo)(()=>({isLoading:P,hasSufficientFunds:p,transactionFees:k,networkFeeErrorMsg:m,nativeTokenSymbol:S}),[P,p,k,m,S])},Qs=e=>e?w.isSolanaNetworkID(e.networkID)?new G(e.value):new G(0):new G(0),Hs=e=>{if(e&&w.isSolanaNetworkID(e.networkID)){let{networkID:t,transaction:n}=e;return{networkID:t,transaction:[n]}}},Ys=({hasSufficientFunds:e,hasGasEstimationFailed:t,nativeTokenSymbol:n})=>t?T.t("transactionGasEstimationError"):e==="insufficient"?T.t("transactionNotEnoughNative",{nativeTokenSymbol:n}):void 0;var Pn=({process:e,transactionData:t,isLoadingTransactionData:n})=>{let r=v(_=>_.provider),o=v(_=>_.fungibleToStake),s=v(_=>_.amount),{data:d}=W("solana"),{fungible:u,isLoadingTokens:c}=ie({key:r?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:l,hasSufficientFunds:p,transactionFees:f,networkFeeErrorMsg:S}=ti({hasPoolTokenAccount:!!u,chainAddress:d,transactionData:t}),m=(0,ni.useMemo)(()=>Xo(o,r),[o,r]),{data:A}=vr(m),k=n||l||c;return Zo({process:e,fungibleToStake:o,amount:s,provider:r,selectedChainAddress:d,transactionFees:f,isLoading:k,canSubmit:!k&&!!t&&p!=="insufficient"&&!S,priceMap:A,networkFeeErrorMsg:S})};var $s=e=>{let{data:t}=W("solana"),{trackConvertApprovedByUser:n}=fe(),r=v(A=>A.convert),o=v(A=>A.provider),s=v(A=>A.amount),d=v(A=>A.setTransactionData),{connection:u}=H(),{fungible:c}=ie({key:o?.stakePoolTokenMetadata.metadata.address||""}),l=c?Gt(c):void 0,{data:p,isLoading:f}=Jo({connection:u,networkId:o?.chainId??w.solana.mainnetID,stakePoolAddress:o?.stakePoolAddress??"",ownerAddress:t?.address??"",validatorVoteAddress:r?.validatorVote??"",stakeAccountAddress:r?.stakeAccount??"",poolTokenAccountAddress:l}),S=Pn({process:"convert",transactionData:p,isLoadingTransactionData:f}),m=(0,ri.useCallback)(()=>{n({provider:o,convertDetails:r,amount:s,fromAmount:S.payAsset?.amount,toAmount:S.receiveAsset?.amount,fromAmountUSD:S.payAsset?.amountUsd,toAmountUSD:S.receiveAsset?.amountUsd}),d(p),e()},[e,d,p,n,r,o,S,s]);return{...S,onPrimaryButtonPress:m}};i();a();var wn=I(L());var Js=({fungible:e,goToConvertStake:t})=>{let{connection:n}=H(),{data:r}=W("solana"),{isLoading:o}=Xt(n,r?.address??""),{trackConvertBannerClicked:s,trackConvertBannerSeen:d}=fe(),{isLoading:u,isSupported:c,initLiquidStake:l,defaultProvider:p}=nn(e),{hasConvertibleStakeAccounts:f}=lt(p),m=!(o||u)&&c&&f,A=(0,wn.useCallback)(()=>{if(!m)throw new Error("Not eligible to convert stake");s(),l(),t()},[m,s,l,t]);return(0,wn.useEffect)(()=>{m&&d()},[m]),{title:T.t("convertStakeBannerTitle"),canConvertStake:m,onPress:A}};i();a();var ii=I(L());i();a();var oi=e=>{let t=M.getMintTokenTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,amount:e.amount,poolTokenAccountAddress:e.poolTokenAccountAddress}),n=!!e.stakePoolAddress&&!!e.ownerAddress&&!!e.amount;return q({enabled:n,queryKey:t,staleTime:1/0,async queryFn(){if(w.isSolanaNetworkID(e.networkId))try{let{transaction:r,signers:o}=await Xn(e);return{networkID:e.networkId,transaction:r,signers:o}}catch(r){throw Q.captureError(r,"staking"),r}throw new Error(`Unsupported networkId: ${e.networkId}`)}})};var Xs=e=>{let t=v(m=>m.provider),n=v(m=>m.amount),r=v(m=>m.setTransactionData),{data:o}=W("solana"),{connection:s}=H(),{fungible:d}=ie({key:t?.stakePoolTokenMetadata.metadata.address||""}),u=d?Gt(d):void 0,{trackMintApprovedByUser:c}=qt(),{data:l,isPending:p}=oi({amount:G(n).toNumber(),connection:s,networkId:t?.chainId??w.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:o?.address??"",poolTokenAccountAddress:u}),f=Pn({process:"mint",transactionData:l,isLoadingTransactionData:p}),S=(0,ii.useCallback)(()=>{c({provider:t,payAmount:f.payAsset?.amount,receiveAmount:f.receiveAsset?.amount,payAmountUSD:f.payAsset?.amountUsd,receiveAmountUSD:f.receiveAsset?.amountUsd,payAssetTitle:f.payAsset?.title,receiveAssetTitle:f.receiveAsset?.title,providerName:f.providerName}),r(l),e()},[c,t,f.payAsset?.amount,f.payAsset?.amountUsd,f.payAsset?.title,f.receiveAsset?.amount,f.receiveAsset?.amountUsd,f.receiveAsset?.title,f.providerName,r,l,e]);return{...f,onPrimaryButtonPress:S}};i();a();var ai=I(L());var Zs=({method:e,goToInfoPage:t,goToInitFlowPage:n})=>{let{usageState:r}=pt();return(0,ai.useCallback)(()=>{r[e]?n():t()},[t,n,e,r])};i();a();var si=I(L());i();a();export{pi as a,mi as b,fi as c,yi as d,ki as e,bi as f,Xt as g,Di as h,Cn as i,_i as j,qi as k,fe as l,Ei as m,lt as n,Ue as o,xi as p,$s as q,Qi as r,Js as s,qt as t,$i as u,Xs as v,Zi as w,ta as x,Zs as y,na as z,ra as A};
//# sourceMappingURL=chunk-RNS57IWG.js.map
