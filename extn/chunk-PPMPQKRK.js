import{gb as V,jb as X}from"./chunk-S6KJ2BHO.js";import{y as f}from"./chunk-7ZZNCPHU.js";import{xa as z}from"./chunk-NMZ7IVPZ.js";import{a as s,l as J}from"./chunk-H6ILHDLW.js";import{a as mt}from"./chunk-7X4NV6OJ.js";import{c as yt,d as ht,f as M,h as c,i as g,n as l}from"./chunk-3KENBVE7.js";var N=yt((Q,R)=>{c();l();(function(e,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof R=="object"&&R.exports?R.exports=t():e.log=t()})(Q,function(){"use strict";var e=function(){},t="undefined",a=typeof self!==t&&typeof self.navigator!==t&&/Trident\/|MSIE /.test(self.navigator.userAgent),n=["trace","debug","info","warn","error"],r={},o=null;function u(d,y){var i=d[y];if(typeof i.bind=="function")return i.bind(d);try{return Function.prototype.bind.call(i,d)}catch{return function(){return Function.prototype.apply.apply(i,[d,arguments])}}}function I(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function T(d){return d==="debug"&&(d="log"),typeof console===t?!1:d==="trace"&&a?I:console[d]!==void 0?u(console,d):console.log!==void 0?u(console,"log"):e}function P(){for(var d=this.getLevel(),y=0;y<n.length;y++){var i=n[y];this[i]=y<d?e:this.methodFactory(i,d,this.name)}if(this.log=this.debug,typeof console===t&&d<this.levels.SILENT)return"No console available for logging"}function ct(d){return function(){typeof console!==t&&(P.call(this),this[d].apply(this,arguments))}}function lt(d,y,i){return T(d)||ct.apply(this,arguments)}function K(d,y){var i=this,x,k,w,m="loglevel";typeof d=="string"?m+=":"+d:typeof d=="symbol"&&(m=void 0);function pt(p){var h=(n[p]||"silent").toUpperCase();if(!(typeof i===t||!m)){try{i.localStorage[m]=h;return}catch{}try{i.document.cookie=encodeURIComponent(m)+"="+h+";"}catch{}}}function G(){var p;if(!(typeof i===t||!m)){try{p=i.localStorage[m]}catch{}if(typeof p===t)try{var h=i.document.cookie,B=encodeURIComponent(m),Y=h.indexOf(B+"=");Y!==-1&&(p=/^([^;]+)/.exec(h.slice(Y+B.length+1))[1])}catch{}return i.levels[p]===void 0&&(p=void 0),p}}function gt(){if(!(typeof i===t||!m)){try{i.localStorage.removeItem(m)}catch{}try{i.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(p){var h=p;if(typeof h=="string"&&i.levels[h.toUpperCase()]!==void 0&&(h=i.levels[h.toUpperCase()]),typeof h=="number"&&h>=0&&h<=i.levels.SILENT)return h;throw new TypeError("log.setLevel() called with invalid level: "+p)}i.name=d,i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},i.methodFactory=y||lt,i.getLevel=function(){return w??k??x},i.setLevel=function(p,h){return w=_(p),h!==!1&&pt(w),P.call(i)},i.setDefaultLevel=function(p){k=_(p),G()||i.setLevel(p,!1)},i.resetLevel=function(){w=null,gt(),P.call(i)},i.enableAll=function(p){i.setLevel(i.levels.TRACE,p)},i.disableAll=function(p){i.setLevel(i.levels.SILENT,p)},i.rebuild=function(){if(o!==i&&(x=_(o.getLevel())),P.call(i),o===i)for(var p in r)r[p].rebuild()},x=_(o?o.getLevel():"WARN");var W=G();W!=null&&(w=_(W)),P.call(i)}o=new K,o.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var i=r[y];return i||(i=r[y]=new K(y,o.methodFactory)),i};var dt=typeof self!==t?self.log:void 0;return o.noConflict=function(){return typeof self!==t&&self.log===o&&(self.log=dt),o},o.getLoggers=function(){return r},o.default=o,o})});c();l();c();l();var H=ft;function ft(e){var t,a,n;if(e){if(Array.isArray(e)){for(t=[],a=e.length,n=0;n<a;n++){var r=e[n];r!=null&&t.push(r)}return t}if(typeof e=="object"){t={};var o=Object.keys(e);for(a=o.length,n=0;n<a;n++){var u=o[n],I=e[u];I!=null&&(t[u]=I)}return t}}}var et=M(N());c();l();var Dt=s.object({chainType:s.union([s.literal("bip122_p2wpkh"),s.literal("bip122_p2tr")]),chainName:s.literal("bitcoin"),networkId:s.union([s.literal("128"),s.literal("239")])}),Tt=s.object({chainType:s.literal("eip155"),chainName:s.literal("ethereum"),networkId:s.union([s.literal("1"),s.literal("5"),s.literal("11155111")])}),St=s.object({chainType:s.literal("eip155"),chainName:s.literal("polygon"),networkId:s.union([s.literal("137"),s.literal("80002")])}),vt=s.object({chainType:s.literal("eip155"),chainName:s.literal("base"),networkId:s.union([s.literal("8453"),s.literal("84532")])}),At=s.object({chainType:s.literal("eip155"),chainName:s.literal("monad"),networkId:s.union([s.literal("143"),s.literal("10143"),s.literal("41454")])}),Z=s.object({chainType:s.literal("solana"),chainName:s.literal("solana"),networkId:s.union([s.literal("mainnet"),s.literal("testnet"),s.literal("devnet"),s.literal("localnet")])}),It=s.object({chainType:s.literal("sui"),chainName:s.literal("sui"),networkId:s.union([s.literal("mainnet"),s.literal("testnet")])}),tt=s.union([Dt,Tt,vt,At,St,Z,It]);var U=()=>["t","y","1","true","yes"].some(e=>g.DISABLE_ANALYTICS?.toLowerCase()===e)??!1;function L(e){if(!e)return;let t=e.data??{},a=e.data?.asset??{};try{t=JSON.parse(JSON.stringify(t)),a=JSON.parse(JSON.stringify(a))}catch(r){et.default.error("Failed to parse analytics payload",r);return}let n={...t,...e.action?{action:e.action}:{},...a&&typeof a=="object"?a:{},...e.type?{type:e.type}:{}};if("chainID"in n&&!("chainType"in n)&&!("chainName"in n)&&!("networkId"in n)){let r=X.safeParse(n.chainID);r.success&&Object.assign(n,at(r.data))}return H(n)}function at(e){let t=V.getChainDefinition(e);return tt.parse({chainType:t.addressTypes[0],chainName:t.id,networkId:t.networks[e].value.toString()})}function wt(e){switch(e){case"mainnet-beta":return"solana:101";case"devnet":return"solana:103";case"testnet":return"solana:102";case"localhost":return"solana:localnet";default:return J(e)}}c();l();c();l();var O=g.RUDDERSTACK_DATAPLANE??g.VITE_RUDDERSTACK_DATAPLANE??"https://data.phantom.app",Et=g.RUDDERSTACK_KEY_EXT,Pt=g.RUDDERSTACK_KEY_WEB;c();l();function b(e,{action:t,data:a}){let n={action:t,data:a};return e.capture("actionApprovedByUser",n)}function C(e,{action:t,data:a}){let n={action:t,data:{...a,chainId:a.chainId??a.networkId}};return e.capture("actionDeniedByUser",n)}function q(e,{action:t,data:a}){let n={type:"transaction",data:{...a,chainId:a.chainId??a.networkId},action:t};return(!n.data.ids||n.data.ids.length===0)&&z.captureError(new Error("No ids found in transactionSubmitted payload"),"provider"),e.capture("transactionSubmitted",n)}function _t(e,{action:t,data:a}){let n={data:{...a,chainId:a.chainId??a.networkId},action:t};return e.capture("transactionStatus",n)}function $(e,t){let a={type:"message",data:{...t,chainId:t.chainId??t.networkId}};return e.capture("transactionSubmitted",a)}var D=class{analytics;action;constructor(t,a){this.analytics=t,this.action=a}approved=t=>{b(this.analytics,{action:this.action,data:{...t,chainId:t.chainId??t.networkId}})};denied=async t=>{C(this.analytics,{action:this.action,data:{...t,chainId:t.chainId??t.networkId}})};submittedTransaction=async(t,a)=>{q(this.analytics,{action:this.action,data:{...a,ids:a.ids??[t],chainId:a.chainId??a.networkId}})};signedMessage=async t=>{$(this.analytics,{...t,chainId:t.chainId??t.networkId})};transactionStatus=async(t,a)=>{a.ids||(a.ids=[t]),_t(this.analytics,{action:this.action,data:{...a,chainId:a.chainId??a.networkId}})}};async function nt(e,t,a){let{origin:n}=t;switch(e.method){case"eth_sendTransaction":{let[r]=e.params,o=f(r.chainId);return o?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${r.chainId}) for method "${e.method}"`}:{success:!0,data:{...o,origin:n,method:e.method,gas:r.gas,maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas,ids:a}}}case"sol_signTransaction":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:n,method:"signTransaction",ids:a}}}case"sol_signAndSendTransaction":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:n,method:"signAndSendTransaction",ids:a}}}case"sol_signAndSendAllTransactions":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:n,method:"signAndSendAllTransactions",ids:a}}}case"sol_signAllTransactions":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:n,method:"signAllTransactions",ids:a}}}}}async function st(e,t){let{origin:a}=t;switch(e.method){case"eth_sign":case"personal_sign":{let n=t.chainId,r=f(n);return r?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${n}) for method "${e.method}"`}:{success:!0,data:{...r,method:e.method,origin:a}}}case"eth_signTypedData":{let[n]=e.params,r=t.chainId;for(let u of n)if(u.name==="chainId"){r=u.value;break}let o=f(r);return o?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${r}) for method "${e.method}"`}:{success:!0,data:{...o,method:e.method,origin:a}}}case"eth_signTypedData_v3":{let[n,r]=e.params,o=r.domain.chainId??t.chainId,u=f(o);return u?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${o}) for method "${e.method}"`}:{success:!0,data:{...u,method:e.method,origin:a}}}case"eth_signTypedData_v4":{let[n,r]=e.params,o=t.chainId;(typeof r.domain.chainId=="string"||typeof r.domain.chainId=="number")&&(o=r.domain.chainId);let u=f(o);return u?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${o}) for method "${e.method}"`}:{success:!0,data:{...u,method:e.method,origin:a}}}case"sol_signIn":case"sol_signMessage":{let n=t.chainId,r=f(n);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${n}) for method "${e.method}"`}:{success:!0,data:{...r,method:e.method==="sol_signIn"?"signIn":"signMessage",origin:a}}}}}c();l();c();l();var S=M(N());var bt=["enable-blocklist-metrics","enable-blocklist-blowfish-logonly","enable-force-upgrade"],v="[Analytics Log]",E=class{storage;constructor(t){this.storage=t}async capture(t,a){S.default.debug(v,"Capture Event:",t,L(a))}async getFeatureFlags(){let{ENABLED_FLAGS:t,featureFlags:a,getFeatureFlagOverrides:n}=await import("./src-5U6PYHAO.js"),r=a.filter(T=>!T.startsWith("kill")&&!bt.includes(T)),o=Object.fromEntries(r.map(T=>[T,!0])),u=await n(this.storage),I=Object.fromEntries(t.map(T=>[T,!0]));return{...o,...I,...u}}async addUserProperties(t){S.default.debug(v,"User Properties:",JSON.stringify(t))}async identify(t,a){S.default.debug(v,"Identify, accountID:",t," traits:",a)}async getDeviceId(){return"mock-device-id"}setDeviceId(t){S.default.debug(v,`SetDeviceId: ${t}`)}async setAnalyticsOptedOut(t){S.default.debug(v,`SetAnalyticsOptedOut: ${t}`)}async setDisplayLanguage(t){S.default.debug(v,`SetDisplayLanguage: ${t}`)}screen(t,a){S.default.debug(v,`Screen: ${t}`,a)}rudderClient};var rt=()=>O,Ct=({storage:e,rudderStackKey:t,createAnalytics:a})=>{if(!t)throw new Error("RUDDERSTACK_KEY_[*] env variables required.");let n=rt();if(!n)throw new Error("[*]_RUDDERSTACK_DATAPLANE env variables required.");return U()?new E(e):a(t,n)};c();l();c();l();var xt="burn",it=e=>new D(e,xt);c();l();var Bt="send",ot=e=>new D(e,Bt);var j={};ht(j,{action:()=>F,createDappAnalytics:()=>Rt,userApprovedAction:()=>Ft,userDeniedAction:()=>kt});c();l();var F="dapp",Rt=e=>new D(e,F);async function Ft(e,t){return await b(e,{action:F,data:{...t,chainId:t.networkId}})}async function kt(e,t){return await C(e,{action:F,data:{...t,chainId:t.networkId}})}var Mt=e=>({send:ot(e),burn:it(e)});c();l();async function A(){}var Nt=()=>({capture:A,getFeatureFlags:async()=>({}),addUserProperties:A,identify:A,getDeviceId:async()=>"",setDeviceId:A,setAnalyticsOptedOut:A,setDisplayLanguage:A,screen:A,rudderClient:{}});c();l();c();l();var Ut=M(mt());export{Et as a,q as b,$ as c,D as d,nt as e,st as f,L as g,at as h,wt as i,Ct as j,j as k,Mt as l,Nt as m};
//# sourceMappingURL=chunk-PPMPQKRK.js.map
